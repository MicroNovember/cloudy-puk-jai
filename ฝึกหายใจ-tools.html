<!DOCTYPE html>
<html lang="th" x-data="premiumBreathingApp()" x-init="initApp()" :class="{ 'dark': darkMode }">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåà Breathing Buddy - Cloudy-Puk-Jai</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Alpine.js -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anuphan:wght@300;400;500;600;700&family=Noto+Sans+Thai:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Premium Design System -->
    <style>
        /* üåà PREMIUM DESIGN SYSTEM */
        :root {
            /* üåø NATURE GRADIENT SYSTEM */
            --gradient-primary: linear-gradient(135deg, #059467 0%, #14b8a5 100%);
            --gradient-accent: linear-gradient(135deg, #14b8a5 0%, #06d6a0 100%);
            --gradient-secondary: linear-gradient(135deg, #525252 0%, #71717a 100%);
            
            /* ‚ú® NEUMORPHISM SHADOWS */
            --shadow-neumorphic: 8px 8px 16px rgba(0, 0, 0, 0.1), 
                                -8px -8px 16px rgba(255, 255, 255, 0.7);
            --shadow-neumorphic-inset: inset 3px 3px 6px rgba(0, 0, 0, 0.1), 
                                      inset -3px -3px 6px rgba(255, 255, 255, 0.7);
            --shadow-floating: 0 20px 40px rgba(5, 148, 103, 0.15),
                              0 10px 20px rgba(20, 184, 165, 0.1);
            
            /* üé® COLOR SYSTEM */
            --color-primary: #059467;
            --color-primary-light: #06d6a0;
            --color-accent: #14b8a5;
            --color-accent-light: #99f6e4;
            --color-secondary: #525252;
            --color-success: #10b981;
            --color-warning: #f59e0b;
            --color-info: #3b82f6;
            
            /* üåô DARK MODE GRADIENTS */
            --gradient-dark: linear-gradient(135deg, #059467 0%, #0d9488 50%, #14b8a5 100%);
            --gradient-night: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            
            /* üèûÔ∏è BACKGROUNDS */
            --bg-glass: rgba(255, 255, 255, 0.9);
            --bg-glass-dark: rgba(30, 41, 59, 0.9);
        }
        
        .dark {
            --shadow-neumorphic: 8px 8px 16px rgba(0, 0, 0, 0.3), 
                                -8px -8px 16px rgba(55, 65, 81, 0.5);
            --shadow-neumorphic-inset: inset 3px 3px 6px rgba(0, 0, 0, 0.3), 
                                      inset -3px -3px 6px rgba(55, 65, 81, 0.5);
            --bg-glass: var(--bg-glass-dark);
        }
    </style>
    
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: 'var(--color-primary)',
                        'primary-light': 'var(--color-primary-light)',
                        accent: 'var(--color-accent)',
                        'accent-light': 'var(--color-accent-light)',
                        secondary: 'var(--color-secondary)',
                        success: 'var(--color-success)',
                        warning: 'var(--color-warning)',
                        info: 'var(--color-info)',
                    },
                    fontFamily: {
                        'sans': ['Anuphan', 'Noto Sans Thai', 'sans-serif'],
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-glow': 'pulse-glow 2s ease-in-out infinite',
                        'shimmer': 'shimmer 2s infinite',
                        'wave': 'wave 8s linear infinite',
                        'breathe-in': 'breatheIn 4s cubic-bezier(0.4, 0, 0.2, 1) infinite',
                        'breathe-hold': 'breatheHold 7s ease-in-out infinite',
                        'breathe-out': 'breatheOut 8s cubic-bezier(0.4, 0, 0.2, 1) infinite',
                        'particle-float': 'particleFloat 3s ease-in-out infinite',
                        'notification-slide': 'notificationSlide 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55)',
                        'card-hover': 'cardHover 0.6s cubic-bezier(0.4, 0, 0.2, 1)',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0px)' },
                            '50%': { transform: 'translateY(-20px)' }
                        },
                        'pulse-glow': {
                            '0%, 100%': { 
                                boxShadow: '0 0 20px rgba(5, 148, 103, 0.3)',
                                transform: 'scale(1)'
                            },
                            '50%': { 
                                boxShadow: '0 0 40px rgba(5, 148, 103, 0.6)',
                                transform: 'scale(1.02)'
                            }
                        },
                        shimmer: {
                            '0%': { backgroundPosition: '-200% 0' },
                            '100%': { backgroundPosition: '200% 0' }
                        },
                        wave: {
                            '0%': { transform: 'translateX(0)' },
                            '100%': { transform: 'translateX(-100%)' }
                        },
                        breatheIn: {
                            '0%': { 
                                transform: 'scale(0.9) rotate(-5deg)',
                                opacity: '0.8'
                            },
                            '50%': { 
                                transform: 'scale(1.1) rotate(5deg)',
                                opacity: '1'
                            },
                            '100%': { 
                                transform: 'scale(0.9) rotate(-5deg)',
                                opacity: '0.8'
                            }
                        },
                        breatheHold: {
                            '0%, 100%': { 
                                transform: 'scale(1.05)',
                                filter: 'brightness(1.1)'
                            },
                            '50%': { 
                                transform: 'scale(1)',
                                filter: 'brightness(0.9)'
                            }
                        },
                        breatheOut: {
                            '0%': { 
                                transform: 'scale(1.1) rotate(5deg)',
                                opacity: '1'
                            },
                            '100%': { 
                                transform: 'scale(0.9) rotate(-5deg)',
                                opacity: '0.8'
                            }
                        },
                        particleFloat: {
                            '0%, 100%': { 
                                transform: 'translateY(0) translateX(0)',
                                opacity: '0.3'
                            },
                            '50%': { 
                                transform: 'translateY(-15px) translateX(10px)',
                                opacity: '0.8'
                            }
                        },
                        notificationSlide: {
                            '0%': { 
                                transform: 'translateX(100%) scale(0.8)',
                                opacity: '0'
                            },
                            '100%': { 
                                transform: 'translateX(0) scale(1)',
                                opacity: '1'
                            }
                        },
                        cardHover: {
                            '0%': { transform: 'translateY(0) rotateX(0)' },
                            '100%': { transform: 'translateY(-10px) rotateX(5deg)' }
                        }
                    },
                    backdropBlur: {
                        xs: '2px',
                    }
                }
            }
        }
    </script>
    
    <style>
        /* ‚ú® PREMIUM STYLES */
        .glass-effect {
            background: var(--bg-glass);
            backdrop-filter: blur(12px) saturate(180%);
            -webkit-backdrop-filter: blur(12px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.18);
        }
        
        .dark .glass-effect {
            background: var(--bg-glass-dark);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .neumorphic {
            box-shadow: var(--shadow-neumorphic);
            border-radius: 20px;
            background: #f0f0f0;
        }
        
        .dark .neumorphic {
            background: #1e293b;
        }
        
        .breathing-circle {
            width: 280px;
            height: 280px;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
        }
        
        @media (max-width: 640px) {
            .breathing-circle {
                width: 220px;
                height: 220px;
            }
        }
        
        .particle {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.6);
            animation: particleFloat 3s ease-in-out infinite;
        }
        
        .notification-toast {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 10000;
            transform: translateX(100%) scale(0.8);
            opacity: 0;
            animation: notificationSlide 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards;
        }
        
        .wave-pattern {
            background: linear-gradient(90deg, 
                transparent 0%, 
                rgba(20, 184, 165, 0.1) 25%, 
                rgba(5, 148, 103, 0.2) 50%, 
                rgba(20, 184, 165, 0.1) 75%, 
                transparent 100%);
            background-size: 200% 100%;
            animation: wave 8s linear infinite;
        }
        
        .progress-ring {
            position: relative;
        }
        
        .progress-ring-circle {
            transition: stroke-dashoffset 0.5s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
        
        .card-3d {
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
        }
        
        .card-3d:hover {
            animation: cardHover 0.6s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }
        
        /* üì± RESPONSIVE TYPOGRAPHY */
        @media (max-width: 640px) {
            .text-hero { font-size: 2.25rem !important; }
            .text-subtitle { font-size: 1.25rem !important; }
            .text-body { font-size: 0.95rem !important; }
            .text-small { font-size: 0.85rem !important; }
        }
        
        /* üéØ SMOOTH SCROLLING */
        html {
            scroll-behavior: smooth;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 text-gray-800 dark:text-gray-100 min-h-screen transition-colors duration-500">
    
    <!-- üåü FLOATING PARTICLES BACKGROUND -->
    <div class="fixed inset-0 pointer-events-none z-0">
        <div class="particle" style="top: 20%; left: 15%; animation-delay: 0s;"></div>
        <div class="particle" style="top: 40%; left: 70%; animation-delay: 0.5s;"></div>
        <div class="particle" style="top: 60%; left: 30%; animation-delay: 1s;"></div>
        <div class="particle" style="top: 80%; left: 85%; animation-delay: 1.5s;"></div>
        <div class="particle" style="top: 30%; left: 50%; animation-delay: 2s;"></div>
    </div>
    
    <!-- üéØ HEADER -->
    <header class="sticky top-0 z-50 glass-effect shadow-lg backdrop-blur-lg">
        <div class="container mx-auto px-4 py-3">
            <div class="flex items-center justify-between">
                <!-- BACK BUTTON WITH ANIMATION -->
                <a href="index.html" 
                   class="group flex items-center text-primary hover:text-primary-light transition-all duration-300 hover:scale-105">
                    <div class="relative p-2 rounded-full bg-white/20 dark:bg-gray-800/20 group-hover:bg-primary/10 transition-colors">
                        <i class="fas fa-arrow-left text-lg"></i>
                        <span class="absolute -top-1 -right-1 w-2 h-2 bg-primary rounded-full animate-pulse"></span>
                    </div>
                    <span class="ml-2 font-medium">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</span>
                </a>
                
                <!-- ANIMATED LOGO -->
                <div class="flex items-center space-x-3">
                    <div class="relative">
                        <div class="text-3xl text-primary animate-pulse-slow">üå∏</div>
                        <div class="absolute -top-1 -right-1 w-3 h-3 bg-accent rounded-full animate-ping opacity-75"></div>
                    </div>
                    <h1 class="text-2xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">
                        Cloudy-Puk-Jai
                    </h1>
                </div>
                
                <!-- THEME TOGGLE WITH ANIMATION -->
                <button @click="toggleDarkMode()" 
                        class="group relative p-3 rounded-full neumorphic hover:shadow-inner transition-all duration-300 hover:scale-110"
                        aria-label="‡∏™‡∏•‡∏±‡∏ö‡∏ò‡∏µ‡∏°">
                    <div class="relative">
                        <i :class="darkMode ? 'fas fa-sun text-yellow-500' : 'fas fa-moon text-indigo-500'" 
                           class="text-xl transition-all duration-500 group-hover:rotate-180"></i>
                        <span class="absolute -bottom-1 -right-1 w-2 h-2 bg-primary rounded-full animate-pulse"></span>
                    </div>
                </button>
            </div>
        </div>
    </header>

    <!-- üé® MAIN CONTENT -->
    <main class="container mx-auto px-4 py-8 relative z-10">
        <div class="max-w-5xl mx-auto">
            
            <!-- üåü HERO SECTION -->
            <div class="text-center mb-12 animate-float">
                <h1 class="text-hero text-5xl md:text-6xl font-black mb-4 bg-gradient-to-r from-primary via-accent to-primary-light bg-clip-text text-transparent animate-pulse-glow">
                    Breathing Buddy
                </h1>
                <p class="text-subtitle text-xl md:text-2xl text-gray-600 dark:text-gray-300 mb-6">
                    ‡∏ù‡∏∂‡∏Å‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏•‡∏∂‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ <span class="font-bold text-primary">4-7-8</span> 
                    <span class="text-accent animate-pulse">‚ú®</span>
                </p>
                <div class="inline-flex items-center px-4 py-2 rounded-full bg-primary/10 text-primary animate-pulse-slow">
                    <i class="fas fa-brain mr-2"></i>
                    <span class="font-medium">‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô: ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î 67%</span>
                </div>
            </div>
            
            <!-- üåÄ BREATHING VISUALIZATION -->
            <div class="flex flex-col items-center mb-16 relative">
                <!-- GLOW EFFECT -->
                <div class="absolute w-72 h-72 rounded-full bg-primary/20 blur-3xl animate-pulse"></div>
                
                <!-- BREATHING CIRCLE -->
                <div class="relative mb-10">
                    <div class="breathing-circle glass-effect shadow-2xl"
                         :class="{
                            'animate-breathe-in': currentState === 'inhale' && isRunning,
                            'animate-breathe-hold': currentState === 'hold' && isRunning,
                            'animate-breathe-out': currentState === 'exhale' && isRunning
                         }"
                         :style="{
                            background: currentState === 'inhale' ? 'var(--gradient-primary)' : 
                                      currentState === 'hold' ? 'var(--gradient-accent)' : 
                                      'var(--gradient-secondary)'
                         }">
                        <!-- WAVE PATTERN -->
                        <div class="absolute inset-0 wave-pattern"></div>
                        
                        <!-- CENTER CONTENT -->
                        <div class="relative z-10 flex flex-col items-center justify-center h-full">
                            <div class="text-8xl font-black mb-2 text-white/90" x-text="currentTime"></div>
                            <div class="text-xl font-bold text-white/80 uppercase tracking-wider" x-text="currentStateText"></div>
                            
                            <!-- PROGRESS RING -->
                            <div class="absolute inset-0 flex items-center justify-center">
                                <svg class="progress-ring w-full h-full" viewBox="0 0 100 100">
                                    <circle class="progress-ring-circle" 
                                            :stroke="currentState === 'inhale' ? '#ffffff' : 
                                                    currentState === 'hold' ? '#fef3c7' : '#f0f0f0'"
                                            :stroke-width="4"
                                            fill="transparent"
                                            r="45"
                                            cx="50"
                                            cy="50"
                                            :stroke-dasharray="283"
                                            :stroke-dashoffset="283 - (283 * getProgress())"/>
                                </svg>
                            </div>
                        </div>
                    </div>
                    
                    <!-- STATE INDICATORS -->
                    <div class="flex justify-between absolute -bottom-6 left-0 right-0">
                        <div class="flex flex-col items-center">
                            <div class="w-3 h-3 rounded-full bg-primary mb-1 animate-pulse"></div>
                            <span class="text-xs font-medium text-gray-600 dark:text-gray-400">‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÄ‡∏Ç‡πâ‡∏≤</span>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="w-3 h-3 rounded-full bg-accent mb-1 animate-pulse"></div>
                            <span class="text-xs font-medium text-gray-600 dark:text-gray-400">‡∏Å‡∏•‡∏±‡πâ‡∏ô‡∏´‡∏≤‡∏¢‡πÉ‡∏à</span>
                        </div>
                        <div class="flex flex-col items-center">
                            <div class="w-3 h-3 rounded-full bg-secondary mb-1 animate-pulse"></div>
                            <span class="text-xs font-medium text-gray-600 dark:text-gray-400">‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏≠‡∏≠‡∏Å</span>
                        </div>
                    </div>
                </div>
                
                <!-- üéÆ SMART CONTROLS -->
                <div class="space-y-8 text-center w-full max-w-md">
                    <!-- PROGRESS STATS -->
                    <div class="grid grid-cols-3 gap-4 mb-6">
                        <div class="glass-effect p-4 rounded-2xl text-center">
                            <div class="text-3xl font-bold text-primary" x-text="cycleCount"></div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">‡∏£‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ó‡∏≥</div>
                        </div>
                        <div class="glass-effect p-4 rounded-2xl text-center">
                            <div class="text-3xl font-bold text-accent" x-text="totalTime"></div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                        </div>
                        <div class="glass-effect p-4 rounded-2xl text-center">
                            <div class="text-3xl font-bold text-success" x-text="focusScore"></div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÇ‡∏ü‡∏Å‡∏±‡∏™</div>
                        </div>
                    </div>
                    
                    <!-- CONTROL BUTTONS -->
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button @click="startBreathing()" 
                                x-show="!isRunning"
                                class="group relative overflow-hidden bg-gradient-to-r from-primary to-primary-light text-white font-bold py-4 px-8 rounded-xl shadow-2xl hover:shadow-3xl transition-all duration-500 hover:scale-105 active:scale-95 flex-1">
                            <div class="absolute inset-0 bg-white/20 translate-x-full group-hover:translate-x-0 transition-transform duration-700"></div>
                            <div class="relative flex items-center justify-center gap-3">
                                <i class="fas fa-play text-xl group-hover:scale-110 transition-transform"></i>
                                <span class="text-lg">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ù‡∏∂‡∏Å‡∏´‡∏≤‡∏¢‡πÉ‡∏à</span>
                            </div>
                            <div class="absolute -bottom-1 -right-1 w-4 h-4 bg-white rounded-full animate-ping"></div>
                        </button>
                        
                        <button @click="pauseBreathing()" 
                                x-show="isRunning"
                                class="group relative overflow-hidden bg-gradient-to-r from-accent to-accent-light text-gray-800 font-bold py-4 px-8 rounded-xl shadow-2xl hover:shadow-3xl transition-all duration-500 hover:scale-105 active:scale-95 flex-1">
                            <div class="absolute inset-0 bg-black/10 translate-x-full group-hover:translate-x-0 transition-transform duration-700"></div>
                            <div class="relative flex items-center justify-center gap-3">
                                <i class="fas fa-pause text-xl group-hover:scale-110 transition-transform"></i>
                                <span class="text-lg">‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏±‡∏Å</span>
                            </div>
                        </button>
                        
                        <button @click="showResetModal = true" 
                                class="group relative overflow-hidden glass-effect text-gray-700 dark:text-gray-300 font-bold py-4 px-8 rounded-xl shadow-xl hover:shadow-2xl transition-all duration-500 hover:scale-105 active:scale-95 flex-1">
                            <div class="relative flex items-center justify-center gap-3">
                                <i class="fas fa-redo text-xl group-hover:rotate-180 transition-transform duration-700"></i>
                                <span class="text-lg">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</span>
                            </div>
                        </button>
                    </div>
                    
                    <!-- GUIDANCE VOICE -->
                    <div class="glass-effect p-4 rounded-2xl">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <div class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center">
                                    <i class="fas fa-volume-up text-primary"></i>
                                </div>
                                <div>
                                    <div class="font-medium" x-text="guidanceText"></div>
                                    <div class="text-xs text-gray-500">‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏™‡∏µ‡∏¢‡∏á</div>
                                </div>
                            </div>
                            <button @click="toggleVoiceGuide()"
                                    class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors">
                                <i :class="voiceEnabled ? 'fas fa-volume-up text-primary' : 'fas fa-volume-mute text-gray-400'" 
                                   class="text-lg"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- üéØ INTERACTIVE GUIDANCE -->
            <div class="mb-16">
                <h2 class="text-3xl font-bold text-center mb-8 flex items-center justify-center gap-3">
                    <div class="p-3 rounded-2xl bg-primary/10 text-primary">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <span>‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</span>
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <!-- INTERACTIVE CARD 1 -->
                    <div class="card-3d glass-effect p-6 rounded-3xl shadow-xl hover:shadow-2xl cursor-pointer group"
                         @click="showTechniqueModal = 'inhale'">
                        <div class="text-center mb-4">
                            <div class="text-5xl font-black text-primary mb-2 group-hover:scale-110 transition-transform">4</div>
                            <h3 class="text-xl font-bold mb-2 group-hover:text-primary transition-colors">‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÄ‡∏Ç‡πâ‡∏≤</h3>
                        </div>
                        <ul class="space-y-2 text-gray-600 dark:text-gray-300">
                            <li class="flex items-start gap-2">
                                <i class="fas fa-check-circle text-success mt-1"></i>
                                <span>‡∏ô‡∏±‡πà‡∏á‡∏´‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏á ‡πÑ‡∏´‡∏•‡πà‡∏ú‡πà‡∏≠‡∏ô‡∏Ñ‡∏•‡∏≤‡∏¢</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i class="fas fa-check-circle text-success mt-1"></i>
                                <span>‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏≤‡∏á‡∏à‡∏°‡∏π‡∏Å‡∏ä‡πâ‡∏≤‡πÜ</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i class="fas fa-check-circle text-success mt-1"></i>
                                <span>‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ó‡πâ‡∏≠‡∏á‡∏Ç‡∏¢‡∏≤‡∏¢</span>
                            </li>
                        </ul>
                        <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700">
                            <div class="text-sm text-primary font-medium flex items-center justify-between">
                                <span>‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</span>
                                <i class="fas fa-chevron-right group-hover:translate-x-2 transition-transform"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- INTERACTIVE CARD 2 -->
                    <div class="card-3d glass-effect p-6 rounded-3xl shadow-xl hover:shadow-2xl cursor-pointer group"
                         @click="showTechniqueModal = 'hold'">
                        <div class="text-center mb-4">
                            <div class="text-5xl font-black text-accent mb-2 group-hover:scale-110 transition-transform">7</div>
                            <h3 class="text-xl font-bold mb-2 group-hover:text-accent transition-colors">‡∏Å‡∏•‡∏±‡πâ‡∏ô‡∏´‡∏≤‡∏¢‡πÉ‡∏à</h3>
                        </div>
                        <ul class="space-y-2 text-gray-600 dark:text-gray-300">
                            <li class="flex items-start gap-2">
                                <i class="fas fa-check-circle text-success mt-1"></i>
                                <span>‡∏Å‡∏•‡∏±‡πâ‡∏ô‡∏•‡∏°‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡∏ó‡πâ‡∏≠‡∏á</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i class="fas fa-check-circle text-success mt-1"></i>
                                <span>‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏π‡πâ‡∏ñ‡∏∂‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏á‡∏ö</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i class="fas fa-check-circle text-success mt-1"></i>
                                <span>‡∏ú‡πà‡∏≠‡∏ô‡∏Ñ‡∏•‡∏≤‡∏¢‡∏Å‡∏•‡πâ‡∏≤‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠</span>
                            </li>
                        </ul>
                        <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700">
                            <div class="text-sm text-accent font-medium flex items-center justify-between">
                                <span>‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</span>
                                <i class="fas fa-chevron-right group-hover:translate-x-2 transition-transform"></i>
                            </div>
                        </div>
                    </div>
                    
                    <!-- INTERACTIVE CARD 3 -->
                    <div class="card-3d glass-effect p-6 rounded-3xl shadow-xl hover:shadow-2xl cursor-pointer group"
                         @click="showTechniqueModal = 'exhale'">
                        <div class="text-center mb-4">
                            <div class="text-5xl font-black text-secondary mb-2 group-hover:scale-110 transition-transform">8</div>
                            <h3 class="text-xl font-bold mb-2 group-hover:text-secondary transition-colors">‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏≠‡∏≠‡∏Å</h3>
                        </div>
                        <ul class="space-y-2 text-gray-600 dark:text-gray-300">
                            <li class="flex items-start gap-2">
                                <i class="fas fa-check-circle text-success mt-1"></i>
                                <span>‡∏ú‡πà‡∏≠‡∏ô‡∏•‡∏°‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏ó‡∏≤‡∏á‡∏õ‡∏≤‡∏Å‡∏ä‡πâ‡∏≤‡πÜ</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i class="fas fa-check-circle text-success mt-1"></i>
                                <span>‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ó‡πâ‡∏≠‡∏á‡∏¢‡∏∏‡∏ö‡∏•‡∏á</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i class="fas fa-check-circle text-success mt-1"></i>
                                <span>‡∏õ‡∏•‡∏î‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏∂‡∏á‡πÄ‡∏Ñ‡∏£‡∏µ‡∏¢‡∏î</span>
                            </li>
                        </ul>
                        <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700">
                            <div class="text-sm text-secondary font-medium flex items-center justify-between">
                                <span>‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</span>
                                <i class="fas fa-chevron-right group-hover:translate-x-2 transition-transform"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- üì± PROGRESS TRACKER -->
            <div class="glass-effect rounded-3xl p-6 mb-12">
                <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
                    <div class="p-2 rounded-xl bg-gradient-to-r from-primary to-accent text-white">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <span>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</span>
                </h2>
                
                <div class="space-y-6">
                    <div>
                        <div class="flex justify-between mb-2">
                            <span class="font-medium">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</span>
                            <span class="font-bold text-primary" x-text="`${dailyProgress}/5 ‡∏£‡∏≠‡∏ö`"></span>
                        </div>
                        <div class="h-4 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden">
                            <div class="h-full bg-gradient-to-r from-primary to-primary-light rounded-full transition-all duration-1000"
                                 :style="`width: ${(dailyProgress/5)*100}%`"></div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div class="text-center p-4 rounded-2xl bg-primary/5">
                            <div class="text-3xl font-bold text-primary" x-text="sessionCount"></div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏ù‡∏∂‡∏Å</div>
                        </div>
                        <div class="text-center p-4 rounded-2xl bg-accent/5">
                            <div class="text-3xl font-bold text-accent" x-text="totalMinutes"></div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- üéÅ ACHIEVEMENTS -->
            <div class="mb-16">
                <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
                    <div class="p-2 rounded-xl bg-gradient-to-r from-yellow-500 to-orange-500 text-white">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <span>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</span>
                </h2>
                
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <template x-for="badge in achievementBadges" :key="badge.id">
                        <div class="glass-effect p-4 rounded-2xl text-center group hover:scale-105 transition-all duration-300"
                             :class="{ 'ring-2 ring-yellow-500': badge.unlocked }">
                            <div class="text-3xl mb-2" x-text="badge.icon"></div>
                            <div class="font-medium mb-1" x-text="badge.title"></div>
                            <div class="text-xs text-gray-500" x-text="badge.description"></div>
                            <div x-show="!badge.unlocked" 
                                 class="mt-2 text-xs text-gray-400">üîí ‡∏£‡∏≠‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Å</div>
                            <div x-show="badge.unlocked" 
                                 class="mt-2 text-xs text-success font-medium">‚úÖ ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!</div>
                        </div>
                    </template>
                </div>
            </div>
            
            <!-- üéØ QUICK TIPS -->
            <div class="bg-gradient-to-r from-primary/10 to-accent/10 rounded-3xl p-8 mb-12">
                <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
                    <i class="fas fa-lightbulb text-2xl text-yellow-500"></i>
                    <span>‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà</span>
                </h2>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-12 h-12 rounded-xl bg-white dark:bg-gray-800 flex items-center justify-center text-primary text-xl">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg mb-1">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°</h3>
                            <p class="text-gray-600 dark:text-gray-300">‡∏ù‡∏∂‡∏Å‡∏ï‡∏≠‡∏ô‡πÄ‡∏ä‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏≠‡∏ô ‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î</p>
                        </div>
                    </div>
                    
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-12 h-12 rounded-xl bg-white dark:bg-gray-800 flex items-center justify-center text-primary text-xl">
                            <i class="fas fa-spa"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg mb-1">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®</h3>
                            <p class="text-gray-600 dark:text-gray-300">‡∏´‡∏≤‡πÑ‡∏ü‡∏™‡∏•‡∏±‡∏ß‡πÜ ‡∏Å‡∏±‡∏ö‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏°‡∏≤‡∏ò‡∏¥</p>
                        </div>
                    </div>
                    
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-12 h-12 rounded-xl bg-white dark:bg-gray-800 flex items-center justify-center text-primary text-xl">
                            <i class="fas fa-heartbeat"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg mb-1">‡∏ü‡∏±‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢</h3>
                            <p class="text-gray-600 dark:text-gray-300">‡∏´‡∏≤‡∏Å‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡∏´‡∏±‡∏ß‡πÉ‡∏´‡πâ‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏±‡∏Å ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</p>
                        </div>
                    </div>
                    
                    <div class="flex items-start gap-4">
                        <div class="flex-shrink-0 w-12 h-12 rounded-xl bg-white dark:bg-gray-800 flex items-center justify-center text-primary text-xl">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg mb-1">‡∏ù‡∏∂‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠</h3>
                            <p class="text-gray-600 dark:text-gray-300">‡πÅ‡∏Ñ‡πà 5 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô ‡∏Å‡πá‡πÄ‡∏´‡πá‡∏ô‡∏ú‡∏•‡πÅ‡∏•‡πâ‡∏ß</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- ü¶∂ FOOTER -->
    <footer class="glass-effect border-t border-gray-200 dark:border-gray-800 mt-16 py-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center gap-8">
                <div class="text-center md:text-left">
                    <div class="flex items-center justify-center md:justify-start gap-3 mb-4">
                        <div class="text-3xl text-primary animate-pulse-slow">üå∏</div>
                        <h2 class="text-2xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">
                            Cloudy-Puk-Jai
                        </h2>
                    </div>
                    <p class="text-gray-600 dark:text-gray-300 italic">
                        "‡∏•‡∏°‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ß‡∏±‡∏ô... ‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï"
                    </p>
                </div>
                
                <div class="flex gap-6">
                    <a href="#" class="p-3 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white transition-all duration-300">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="#" class="p-3 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white transition-all duration-300">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" class="p-3 rounded-full bg-gray-100 dark:bg-gray-800 hover:bg-primary hover:text-white transition-all duration-300">
                        <i class="fab fa-line"></i>
                    </a>
                </div>
            </div>
            
            <div class="mt-8 pt-8 border-t border-gray-200 dark:border-gray-800 text-center">
                <p class="text-sm text-gray-500 dark:text-gray-400">
                    ¬© 2026 Cloudy-Puk-Jai Premium. ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏à‡∏¥‡∏ï‡∏Ñ‡∏ô‡πÑ‡∏ó‡∏¢
                </p>
            </div>
        </div>
    </footer>

    <!-- üé™ MODALS & NOTIFICATIONS -->
    
    <!-- TECHNIQUE MODAL -->
    <div x-show="showTechniqueModal" 
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         class="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"
         @click.self="showTechniqueModal = null">
        <div class="glass-effect max-w-md w-full rounded-3xl p-8 shadow-2xl animate-notification-slide">
            <template x-if="showTechniqueModal === 'inhale'">
                <div>
                    <div class="text-center mb-6">
                        <div class="text-6xl font-black text-primary mb-2">4</div>
                        <h3 class="text-2xl font-bold">‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÄ‡∏Ç‡πâ‡∏≤</h3>
                    </div>
                    <div class="space-y-4">
                        <p>‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡πâ‡∏≤‡πÜ ‡∏ó‡∏≤‡∏á‡∏à‡∏°‡∏π‡∏Å ‡∏ô‡∏±‡∏ö 1-4 ‡πÉ‡∏ô‡πÉ‡∏à</p>
                        <ul class="space-y-2">
                            <li class="flex items-start gap-2">
                                <i class="fas fa-lungs text-primary mt-1"></i>
                                <span>‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ó‡πâ‡∏≠‡∏á‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏•‡∏π‡∏Å‡πÇ‡∏õ‡πà‡∏á</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i class="fas fa-hand-peace text-primary mt-1"></i>
                                <span>‡πÑ‡∏´‡∏•‡πà‡∏ú‡πà‡∏≠‡∏ô‡∏Ñ‡∏•‡∏≤‡∏¢ ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏£‡πá‡∏á</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i class="fas fa-smile text-primary mt-1"></i>
                                <span>‡∏à‡∏¥‡∏ô‡∏ï‡∏ô‡∏≤‡∏Å‡∏≤‡∏£‡∏ñ‡∏∂‡∏á‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏ö‡∏£‡∏¥‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡πå</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </template>
            <!-- Similar content for hold and exhale modals -->
            <button @click="showTechniqueModal = null"
                    class="w-full mt-6 py-3 bg-primary text-white font-bold rounded-xl hover:bg-primary-dark transition-colors">
                ‡∏õ‡∏¥‡∏î
            </button>
        </div>
    </div>

    <!-- üéØ NOTIFICATION SYSTEM -->
    <div class="fixed top-6 right-6 z-50 space-y-4" 
         x-data="{ notifications: [] }"
         x-init="setInterval(() => {
            if($store.breathing.cycleCount % 3 === 0 && $store.breathing.cycleCount > 0) {
                notifications.push({
                    id: Date.now(),
                    type: 'success',
                    title: '‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏°‡∏≤‡∏Å!',
                    message: `‡∏Ñ‡∏∏‡∏ì‡∏ù‡∏∂‡∏Å‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏Ñ‡∏£‡∏ö ${$store.breathing.cycleCount} ‡∏£‡∏≠‡∏ö‡πÅ‡∏•‡πâ‡∏ß üéâ`
                });
                setTimeout(() => {
                    notifications.shift();
                }, 3000);
            }
         }, 1000)">
        <template x-for="notification in notifications" :key="notification.id">
            <div class="notification-toast glass-effect p-4 rounded-2xl shadow-2xl min-w-80 max-w-sm border-l-4"
                 :class="{
                    'border-success': notification.type === 'success',
                    'border-warning': notification.type === 'warning',
                    'border-primary': notification.type === 'info'
                 }">
                <div class="flex items-start gap-3">
                    <div class="p-2 rounded-full"
                         :class="{
                            'bg-success/20 text-success': notification.type === 'success',
                            'bg-warning/20 text-warning': notification.type === 'warning',
                            'bg-primary/20 text-primary': notification.type === 'info'
                         }">
                        <i class="fas fa-check"></i>
                    </div>
                    <div class="flex-1">
                        <h4 class="font-bold" x-text="notification.title"></h4>
                        <p class="text-sm text-gray-600 dark:text-gray-300" 
                           x-text="notification.message"></p>
                    </div>
                    <button @click="notifications = notifications.filter(n => n.id !== notification.id)"
                            class="p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
        </template>
    </div>

    <!-- üß† PREMIUM JAVASCRIPT -->
    <script>
        document.addEventListener('alpine:init', () => {
            // üéØ STORE FOR STATE MANAGEMENT
            Alpine.store('breathing', {
                cycleCount: 0,
                sessionCount: 0,
                totalMinutes: 0,
                dailyProgress: 0,
                focusScore: 95
            });
            
            // üéÆ MAIN APP
            Alpine.data('premiumBreathingApp', () => ({
                // STATE
                darkMode: false,
                isRunning: false,
                currentState: 'inhale',
                currentTime: 4,
                totalTime: '0:00',
                guidanceText: '‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ù‡∏∂‡∏Å‡∏´‡∏≤‡∏¢‡πÉ‡∏à 4-7-8',
                voiceEnabled: true,
                showTechniqueModal: null,
                showResetModal: false,
                
                // ACHIEVEMENTS
                achievementBadges: [
                    { id: 1, icon: 'üë∂', title: '‡∏°‡∏∑‡∏≠‡πÉ‡∏´‡∏°‡πà', description: '‡∏ù‡∏∂‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å', unlocked: true },
                    { id: 2, icon: 'üí™', title: '‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏Å‡∏£‡πà‡∏á', description: '‡∏ù‡∏∂‡∏Å‡∏Ñ‡∏£‡∏ö 10 ‡∏£‡∏≠‡∏ö', unlocked: true },
                    { id: 3, icon: 'üßò', title: '‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô', description: '‡∏ù‡∏∂‡∏Å‡∏Ñ‡∏£‡∏ö 50 ‡∏£‡∏≠‡∏ö', unlocked: false },
                    { id: 4, icon: 'üèÜ', title: '‡∏õ‡∏£‡∏°‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå', description: '‡∏ù‡∏∂‡∏Å‡∏Ñ‡∏£‡∏ö 100 ‡∏£‡∏≠‡∏ö', unlocked: false }
                ],
                
                // COMPUTED
                get currentStateText() {
                    const states = {
                        'inhale': '‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÄ‡∏Ç‡πâ‡∏≤',
                        'hold': '‡∏Å‡∏•‡∏±‡πâ‡∏ô‡∏´‡∏≤‡∏¢‡πÉ‡∏à',
                        'exhale': '‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏≠‡∏≠‡∏Å',
                        'ready': '‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°'
                    };
                    return states[this.currentState];
                },
                
                get sessionCount() {
                    return this.$store.breathing.sessionCount;
                },
                
                get totalMinutes() {
                    return this.$store.breathing.totalMinutes;
                },
                
                get dailyProgress() {
                    return this.$store.breathing.dailyProgress;
                },
                
                get focusScore() {
                    return this.$store.breathing.focusScore;
                },
                
                get cycleCount() {
                    return this.$store.breathing.cycleCount;
                },
                
                // METHODS
                initApp() {
                    this.darkMode = localStorage.getItem('darkMode') === 'true';
                    this.loadProgress();
                    this.setupGuidanceVoice();
                },
                
                loadProgress() {
                    const saved = localStorage.getItem('breathingProgress');
                    if (saved) {
                        const data = JSON.parse(saved);
                        this.$store.breathing = { ...this.$store.breathing, ...data };
                    }
                },
                
                saveProgress() {
                    localStorage.setItem('breathingProgress', JSON.stringify({
                        cycleCount: this.cycleCount,
                        sessionCount: this.sessionCount,
                        totalMinutes: this.totalMinutes,
                        dailyProgress: this.dailyProgress,
                        focusScore: this.focusScore
                    }));
                },
                
                setupGuidanceVoice() {
                    if ('speechSynthesis' in window && this.voiceEnabled) {
                        this.guidanceVoices = speechSynthesis.getVoices();
                    }
                },
                
                speakGuidance(text) {
                    if (!this.voiceEnabled || !('speechSynthesis' in window)) return;
                    
                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'th-TH';
                    utterance.rate = 0.9;
                    utterance.pitch = 1;
                    
                    speechSynthesis.speak(utterance);
                },
                
                startBreathing() {
                    if (this.isRunning) return;
                    
                    this.isRunning = true;
                    this.currentState = 'inhale';
                    this.currentTime = 4;
                    this.$store.breathing.sessionCount++;
                    this.guidanceText = '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÄ‡∏Ç‡πâ‡∏≤... ‡∏ô‡∏±‡∏ö 1-4';
                    
                    if (this.voiceEnabled) {
                        this.speakGuidance('‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ù‡∏∂‡∏Å‡∏´‡∏≤‡∏¢‡πÉ‡∏à ‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÄ‡∏Ç‡πâ‡∏≤‡∏ä‡πâ‡∏≤‡πÜ ‡∏ô‡∏±‡∏ö 1 2 3 4');
                    }
                    
                    this.startTimer();
                    this.saveProgress();
                },
                
                startTimer() {
                    this.timer = setInterval(() => {
                        this.currentTime--;
                        
                        if (this.currentTime === 3 && this.currentState === 'inhale') {
                            this.guidanceText = '‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÄ‡∏Ç‡πâ‡∏≤... ‡∏ô‡∏±‡∏ö 1-4';
                        } else if (this.currentTime === 0) {
                            this.nextState();
                        }
                    }, 1000);
                    
                    this.updateTotalTime();
                },
                
                nextState() {
                    if (this.currentState === 'inhale') {
                        this.currentState = 'hold';
                        this.currentTime = 7;
                        this.guidanceText = '‡∏Å‡∏•‡∏±‡πâ‡∏ô‡∏´‡∏≤‡∏¢‡πÉ‡∏à... ‡∏ô‡∏±‡∏ö 1-7';
                        if (this.voiceEnabled) this.speakGuidance('‡∏Å‡∏•‡∏±‡πâ‡∏ô‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÑ‡∏ß‡πâ ‡∏ô‡∏±‡∏ö 1 2 3 4 5 6 7');
                    } else if (this.currentState === 'hold') {
                        this.currentState = 'exhale';
                        this.currentTime = 8;
                        this.guidanceText = '‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏≠‡∏≠‡∏Å... ‡∏ô‡∏±‡∏ö 1-8';
                        if (this.voiceEnabled) this.speakGuidance('‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡∏≠‡∏≠‡∏Å‡∏ä‡πâ‡∏≤‡πÜ ‡∏ô‡∏±‡∏ö 1 2 3 4 5 6 7 8');
                    } else if (this.currentState === 'exhale') {
                        this.$store.breathing.cycleCount++;
                        this.$store.breathing.dailyProgress++;
                        this.currentState = 'inhale';
                        this.currentTime = 4;
                        this.guidanceText = '‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà... ‡∏´‡∏≤‡∏¢‡πÉ‡∏à‡πÄ‡∏Ç‡πâ‡∏≤';
                        
                        // Update achievements
                        if (this.cycleCount >= 10) {
                            this.achievementBadges[1].unlocked = true;
                        }
                        if (this.cycleCount >= 50) {
                            this.achievementBadges[2].unlocked = true;
                        }
                        if (this.cycleCount >= 100) {
                            this.achievementBadges[3].unlocked = true;
                        }
                        
                        // Show encouragement
                        if (this.cycleCount % 3 === 0) {
                            this.showEncouragement();
                        }
                        
                        this.saveProgress();
                    }
                },
                
                pauseBreathing() {
                    this.isRunning = false;
                    clearInterval(this.timer);
                    this.guidanceText = '‡∏´‡∏¢‡∏∏‡∏î‡∏û‡∏±‡∏Å... ‡∏Å‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ù‡∏∂‡∏Å‡∏ï‡πà‡∏≠';
                },
                
                resetBreathing() {
                    this.pauseBreathing();
                    this.currentState = 'inhale';
                    this.currentTime = 4;
                    this.showResetModal = false;
                    this.guidanceText = '‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ù‡∏∂‡∏Å‡πÉ‡∏´‡∏°‡πà';
                },
                
                updateTotalTime() {
                    if (!this.isRunning) return;
                    
                    this.totalTimeInterval = setInterval(() => {
                        const totalSeconds = this.cycleCount * 19; // 4+7+8 = 19 seconds per cycle
                        const minutes = Math.floor(totalSeconds / 60);
                        const seconds = totalSeconds % 60;
                        this.totalTime = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                        this.$store.breathing.totalMinutes = Math.floor(totalSeconds / 60);
                    }, 1000);
                },
                
                getProgress() {
                    const totalTimes = {
                        'inhale': 4,
                        'hold': 7,
                        'exhale': 8
                    };
                    const total = totalTimes[this.currentState];
                    return (total - this.currentTime) / total;
                },
                
                showEncouragement() {
                    const messages = [
                        '‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°! ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏î‡∏µ‡∏°‡∏≤‡∏Å üåü',
                        '‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! ‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ú‡πà‡∏≠‡∏ô‡∏Ñ‡∏•‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô üßò',
                        '‡∏î‡∏µ‡∏°‡∏≤‡∏Å‡πÄ‡∏•‡∏¢! ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏à‡∏¥‡∏ï‡∏ó‡∏µ‡πà‡∏î‡∏µ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà üíö',
                        '‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î! ‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏π‡πÅ‡∏•‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‚ú®'
                    ];
                    const randomMsg = messages[Math.floor(Math.random() * messages.length)];
                    
                    // Add to notifications
                    Alpine.store('breathing').notifications = [
                        {
                            id: Date.now(),
                            type: 'success',
                            title: 'üéâ ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!',
                            message: randomMsg
                        }
                    ];
                },
                
                toggleVoiceGuide() {
                    this.voiceEnabled = !this.voiceEnabled;
                    localStorage.setItem('voiceEnabled', this.voiceEnabled);
                },
                
                toggleDarkMode() {
                    this.darkMode = !this.darkMode;
                    localStorage.setItem('darkMode', this.darkMode);
                    
                    if (this.darkMode) {
                        document.documentElement.classList.add('dark');
                    } else {
                        document.documentElement.classList.remove('dark');
                    }
                }
            }));
        });
    </script>
</body>
</html>